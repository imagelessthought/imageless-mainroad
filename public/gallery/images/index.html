<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Image Gallery</title>
  <link rel="icon" type="image/x-icon" href="https://public.cvad.unt.edu/_images/_archive_custom/green bulb.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
  <style>
    html {
      background-color: #2d2c2c;
      font-family: 'Open Sans', sans-serif;
      color: white;
    }

    body {
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-start;
      align-items: center;
      margin-bottom: 2rem;
      margin-top: 0;
      padding: 1rem;
    }

    #gallery {
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-start; /* Left align items horizontally */
      width: 100%;
    }

    .image-container {
      width: 150px;
  /*  height: 340px;  */
      margin: 5px;
      padding: 5px;
      overflow: hidden;
      border: 1px solid transparent;
      border-radius: 4px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background-color:  #2d2c2c; /* #707B7C; */
   /* box-shadow: white 0 0 1px 1px;  */
    }

    .image-link {
      display: block;
      text-decoration: none;
    }

    img {
      width: 130px;
      box-shadow: black 0 0 3px 1px;
      outline: 1px solid black;
      padding: 4px;
    }

    img:hover {
      box-shadow: #B9DCD2 0 0 3px 3px;
      outline: 1px solid #336699;
      background-color: white;
    }

    .caption {
      text-align: center;
      padding: 5px;
      font-size: 0.65rem;
      background-color: #2d2c2c;
      color: white;
      margin-top: 1rem;
      border-radius: 4px;
      box-shadow: #2d2c2c 0 0 1px 1px;
    }

    body::after {
      content: '';
      flex: auto;
    }

    .pagination {
      display: flex;
      flex-wrap: wrap;
      justify-content: left;
      align-items: center;
      width: 100%;
      margin-top: 2rem;
      gap: .5rem 0;
    }

    @media screen and (max-width: 900px) {
    .pagination {
      justify-content: center;
    }
    .image-container {
      width: calc(50% - 40px);
      height: auto;
    }

    #gallery {
      justify-content: center; /* Left align items horizontally */
    }
  }

    .page-link {
      margin: 0 5px;
      padding: 5px;
      text-decoration: none;
      color: white;
      background-color: #2d2c2c;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    .page-link.active {
      background-color: #336699;
    }
  </style>
</head>
<body>
  <h1 style="margin: 0 0 1rem 0;">Image Gallery</h1>
  <div id="gallery"></div>
  <div class="pagination" id="pagination"></div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const gallery = document.getElementById("gallery");
      const paginationContainer = document.getElementById("pagination");
      const imagesPerRow = 4;
      const imagesPerPage = 20; // Change the number of images per page
      let currentPage = 1;

      function displayImages() {
        const imageFolder = "images/index.dat";

        fetch(imageFolder)
          .then(response => response.text())
          .then(data => {
            const imageFiles = data.trim().split('\n');
            const filteredFiles = imageFiles.filter(filename => filename.trim() !== "index.dat");

            const startIdx = (currentPage - 1) * imagesPerPage;
            const endIdx = startIdx + imagesPerPage;

            for (let i = startIdx; i < endIdx && i < filteredFiles.length; i++) {
              const filename = filteredFiles[i];
              const container = document.createElement("div");
              container.classList.add("image-container");

              const imageLink = document.createElement("a");
              imageLink.classList.add("image-link");

              const image = document.createElement("img");
              const imagePath = `images/${filename.trim()}`;

              image.src = imagePath;
              image.alt = filename.trim();

              imageLink.href = imagePath;
              imageLink.target = "_blank";

              imageLink.appendChild(image);
              container.appendChild(imageLink);

              const caption = document.createElement("div");
              caption.classList.add("caption");
              caption.textContent = filename.trim();
              container.appendChild(caption);

              gallery.appendChild(container);
            }

            const totalPages = Math.ceil(filteredFiles.length / imagesPerPage);

            for (let i = 1; i <= totalPages; i++) {
              const pageLink = document.createElement("a");
              pageLink.classList.add("page-link");
              pageLink.href = "#";
              pageLink.textContent = i < 10 ? `0${i}` : i;
              pageLink.addEventListener("click", () => changePage(i));
              if (i === currentPage) {
                pageLink.classList.add("active");
              }
              paginationContainer.appendChild(pageLink);
            }
          })
          .catch(error => console.error("Error fetching images:", error));
      }

      function changePage(page) {
        currentPage = page;
        gallery.innerHTML = "";
        paginationContainer.innerHTML = "";
        displayImages();
      }

      displayImages();
    });
  </script>
</body>
</html>
